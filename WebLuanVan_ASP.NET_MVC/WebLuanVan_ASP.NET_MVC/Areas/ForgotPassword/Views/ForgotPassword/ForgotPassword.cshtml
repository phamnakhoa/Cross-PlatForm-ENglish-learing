@{
    ViewData["Title"] = "Quên mật khẩu";
    Layout = "~/Areas/Login/Views/Shared/_LayoutLogin.cshtml";
}

<div class="text-center mb-4">
    <h4>Quên mật khẩu</h4>
    <p>Nhập email hoặc số điện thoại để nhận mã OTP đặt lại mật khẩu.</p>
</div>
<form id="forgotPasswordForm" method="post" asp-action="SendForgotPassword" asp-controller="ForgotPassword">
    <div class="mb-3">
        <label for="inputContact" class="form-label">Email hoặc Số điện thoại</label>
        <input type="text" class="form-control" id="inputContact" name="Contact" placeholder="Nhập email hoặc số điện thoại" required />
        <span class="text-danger" id="contactError"></span>
    </div>
    <div class="mb-3">
        <label for="method" class="form-label">Phương thức nhận OTP</label>
        <select class="form-select" id="method" name="Method" required>
            <option value="">-- Chọn phương thức --</option>
            <option value="Email">Email</option>
            <option value="SMS">SMS</option>
        </select>
    </div>
    <button type="submit" class="btn btn-primary w-100 py-2 fs-4 mb-4">Gửi mã OTP</button>
</form>

<script>
    function isEmail(value) {
        // Simple email regex
        return /^[^\s@@]+@@[^\s@@]+\.[^\s@@]+$/.test(value);
    }
    function isPhone(value) {
        // Simple phone regex (Vietnamese format, adjust as needed)
        return /^0\d{9,10}$/.test(value);
    }

    document.getElementById('forgotPasswordForm').addEventListener('submit', function (e) {
        var contactInput = document.getElementById('inputContact');
        var errorSpan = document.getElementById('contactError');
        var value = contactInput.value.trim();
        errorSpan.textContent = '';

        if (!isEmail(value) && !isPhone(value)) {
            errorSpan.textContent = 'Vui lòng nhập đúng email hoặc số điện thoại.';
            e.preventDefault();
        }
    });
</script>
