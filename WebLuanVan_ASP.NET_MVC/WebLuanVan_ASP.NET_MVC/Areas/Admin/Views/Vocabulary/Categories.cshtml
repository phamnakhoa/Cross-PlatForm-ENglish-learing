@model IEnumerable<WebLuanVan_ASP.NET_MVC.Areas.Admin.Models.CVocabularyCategory>
@using WebLuanVan_ASP.NET_MVC.Areas.Admin.Models
@{
    ViewData["Title"] = "Danh mục từ vựng";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutAdmin.cshtml";
    var paginate = ViewBag.Paginate as Paginate ?? new Paginate();
    string searchTerm = ViewBag.SearchTerm as string;
}
<link rel="stylesheet" href="~/AdminTL/assets/css/index.css">

<div class="content-header mb-4">
    <h1>Danh mục từ vựng</h1>
    <form method="get" class="row mb-3">
        <div class="col-md-8">
            <input type="text" name="searchTerm" class="form-control" value="@searchTerm" placeholder="Tìm kiếm danh mục..." />
        </div>
        <div class="col-md-4 d-flex gap-2">
            <button type="submit" class="btn btn-primary">Tìm kiếm</button>
            <a asp-area="Admin" asp-controller="Vocabulary" asp-action="AddCategory" class="btn btn-success">
                <i class="fas fa-plus"></i> Thêm danh mục
            </a>
        </div>
    </form>
    <a asp-area="Admin" asp-controller="Vocabulary" asp-action="Index" class="btn btn-outline-secondary">
        <i class="fas fa-arrow-left"></i> Quay lại danh sách từ vựng
    </a>
</div>

<div class="row">
    @if (Model != null && Model.Any())
    {
        foreach (var cat in Model)
        {
            <div class="col-md-6 col-lg-4 col-xl-3 mb-4">
                <div class="card h-100 shadow-sm category-card">
                    <img src="@(string.IsNullOrEmpty(cat.UrlImage) ? "/Admin/assets/images/logo-mini.svg" : cat.UrlImage)" class="card-img-top img-fluid" alt="@cat.VocabularyCategoryName" style="height:160px;object-fit:cover;">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title text-primary">@cat.VocabularyCategoryName</h5>
                        <p class="card-text text-truncate" title="@cat.VocabularyCategoryDescription">
                            @cat.VocabularyCategoryDescription
                        </p>
                        <div class="mt-auto d-flex justify-content-between align-items-center">
                           
                            <div>
                                <a asp-area="Admin" asp-controller="Vocabulary" asp-action="Index" asp-route-categoryId="@cat.VocabularyCategoryId" class="btn btn-outline-primary btn-sm me-1" title="Xem từ vựng">
                                    <i class="fas fa-search"></i>
                                </a>
                                <a asp-area="Admin" asp-controller="Vocabulary" asp-action="formEditCategory" asp-route-id="@cat.VocabularyCategoryId" class="btn btn-outline-warning btn-sm me-1" title="Sửa">
                                    <i class="fas fa-edit"></i>
                                </a>
                                <a asp-area="Admin" asp-controller="Vocabulary" asp-action="DeleteCategory" asp-route-id="@cat.VocabularyCategoryId" class="btn btn-outline-danger btn-sm" title="Xóa" onclick="return confirm('Bạn có chắc muốn xóa danh mục này?');">
                                    <i class="fas fa-trash"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
    }
    else
    {
        <div class="col-12 text-center text-muted">Không có danh mục từ vựng nào.</div>
    }
</div>

<partial name="_Paging" model="@paginate" />

@section Scripts {
    <script>
        // Nếu có dropdown filter, khởi tạo select2 ở đây
        $('.select2').select2({
            theme: 'bootstrap-5'
        });
    </script>
}
<style>
    .category-card .card-title {
        font-size: 1.1rem;
        font-weight: 600;
        min-height: 40px;
    }

    .category-card .card-text {
        min-height: 48px;
        max-height: 48px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: normal;
    }

    .category-card img {
        border-bottom: 1px solid #eee;
    }
</style>
